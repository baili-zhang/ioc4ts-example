/**
 * Property 注解
 * 
 * 定义在类的属性上，用来标识属性名称
 * 
 * @author zhangbaili
 * @since 2021/10/23
*/

import ApplicationContext from '../ApplicationContext'

export default function Property(name: string): any {
    return (klass: any, propertyKey: string) => {
        const beanFactory = ApplicationContext.getInstance().getBeanFactory()
        const beanDefinition = beanFactory.getBeanDefinitionByCtor(klass.constructor)

        if(beanDefinition) {
            beanDefinition.appendProperty(name, propertyKey)
        } else {
            const newBeanDefinition = beanFactory.loadBeanDefinition(klass.constructor)
            newBeanDefinition.appendProperty(name, propertyKey)
        }
    }
}
