/**
 * HttpRequest 注解
 *
 * @author zhangbaili
 * @since 1.1.0-beta
 */

import ApplicationContext from '../../core/ApplicationContext'

export default function HttpRequest() {
    return (ctor: any) => {
        const httpRequest = new ctor()
        
        if (!(httpRequest.request instanceof Function)) {
            throw new Error(`Error: Class "${ctor.name}" must provide "request" method !`)
        }

        ApplicationContext.getInstance()
            .getBeanFactory()
            .registerSingleton('HttpRequest', httpRequest)
    }
}
